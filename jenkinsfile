pipeline {
    agent any 

    environment {
        IMAGE_NAME = "vinod/node-app"
    }
    stages{
        stage('checkout'){
            steps{
                git branch : 'main', url: 'https://github.com/vinod-o/node-js.git'

            }
        }
    
        stage('install dependencies'){
            steps{
            sh "npm install"

            }
        }
        stage('test'){
            steps{
                sh "npm test"
            }
        }
        stage('Build docker image'){
            steps{
                sh ' docker build -t ${IMAGE_NAME} .'
            }
        }

    }
}